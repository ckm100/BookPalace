<!DOCTYPE html><html><head> <title>All Books</title> <% include partial/header.ejs %></head><body> <% include partial/nav.ejs %> <h1 class="all-books-h1">All Books</h1> <div class="books-container"> <% data.forEach(function(a){%> <% a.bookData.forEach(function(val){%> <div class="book"> <img src="<%=val.thumbnail%>" alt="<%=val.title%>" class="book-thumbnail"> <div class="book-info"> <p><strong>Title:</strong> <%=val.title%> </p><p><strong>Authors:</strong> <%=val.authors.join(", ") %> </p><p><strong>Publisher:</strong> <%=val.publisher%> </p><p><strong>Published Date:</strong> <%=val.publishedDate%> </p><p><strong>Book Info:</strong> <a href="<%=val.link%>" target="_blank" class="book-info-link">Here</a></p><% if (currentUser.requestApprove.indexOf(val._id.toString()) !==-1){%> <p class="pending-request">Request for this book has been approved</p><%}else{%> <% if (currentUser.bookId.indexOf(val._id.toString())===-1){%> <% if (currentUser.requestTo.indexOf(val._id.toString()) !==-1){%> <button data-userId="<%=a._id%>" data-bookId="<%=val._id%>" data-bookName="<%=val.title%>" class="request-book-btn" disabled="disabled">Waiting Approval</button> <button data-userId="<%=a._id%>" data-bookId="<%=val._id%>" class="cancel-request-btn" style="display:inline-block;">Cancel Request</button> <%}else{%> <button data-userId="<%=a._id%>" data-bookId="<%=val._id%>" data-bookName="<%=val.title%>" class="request-book-btn">Request Book</button> <button data-userId="<%=a._id%>" data-bookId="<%=val._id%>" class="cancel-request-btn">Cancel Request</button> <%}%> <%}%> <%}%> </div></div><%}) %> <%}) %> </div><div class="top"><span><i class="fa fa-chevron-up"></i></span></div><div class="loader-container"> <img src="/img/loader.gif" alt="loader" class="loader"> <h3 class="loader-message"></h3> <button class="close-btn">Close</button> </div><div class="overlay"></div><% include partial/footer.ejs %></body></html>